<div>
  <p-menubar>
    <ng-template pTemplate="start">
      <img
        src="https://trainiq.ai/assets/img/front-pages/branding/logo.webp"
        height="30"
      />
    </ng-template>
    <ng-template pTemplate="end">
      <div class="flex align-items-center gap-2">
        <input
          type="text"
          pInputText
          placeholder="Not working"
          class="w-8rem sm:w-auto"
        />
      </div>
    </ng-template>
  </p-menubar>
  <div class="surface-ground px-4 py-5 md:px-6 lg:px-8">
    <div class="grid">
      <div class="col-12 md:col-6 lg:col-4">
        <div class="surface-card shadow-2 p-3 border-round">
          <div class="flex justify-content-between mb-3">
            <div>
              <span class="block text-500 font-medium mb-3"
                >Average Employee Score</span
              >
              <div class="text-900 font-medium text-xl">
                {{ average_employee_score }}
              </div>
            </div>
            <div
              class="flex align-items-center justify-content-center bg-blue-100 border-round"
              style="width: 2.5rem; height: 2.5rem"
            >
              <i class="pi pi-percentage text-blue-500 text-xl"></i>
            </div>
          </div>
        </div>
      </div>
      <div class="col-12 md:col-6 lg:col-4">
        <div class="surface-card shadow-2 p-3 border-round">
          <div class="flex justify-content-between mb-3">
            <div>
              <span class="block text-500 font-medium mb-3"
                >Total Completed Courses</span
              >
              <div class="text-900 font-medium text-xl">
                {{ total_completed_courses }}
              </div>
            </div>
            <div
              class="flex align-items-center justify-content-center bg-orange-100 border-round"
              style="width: 2.5rem; height: 2.5rem"
            >
              <i class="pi pi-check-circle text-orange-500 text-xl"></i>
            </div>
          </div>
        </div>
      </div>
      <div class="col-12 md:col-6 lg:col-4">
        <div class="surface-card shadow-2 p-3 border-round">
          <div class="flex justify-content-between mb-3">
            <div>
              <span class="block text-500 font-medium mb-3"
                >Total Employees</span
              >
              <div class="text-900 font-medium text-xl">
                {{ total_employees }}
              </div>
            </div>
            <div
              class="flex align-items-center justify-content-center bg-cyan-100 border-round"
              style="width: 2.5rem; height: 2.5rem"
            >
              <i class="pi pi-user text-cyan-500 text-xl"></i>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="px-4 md:px-6 lg:px-8">
    <p class="text-xl text-900 font-medium mb-3">Top Employees</p>
    <div class="grid">
      <div
        class="col-12 md:col-6 lg:col-4 cursor-pointer"
        *ngFor="let employee of top_employees"
        [pTooltip]="employee.title"
        tooltipPosition="top"
      >
        <div class="surface-card shadow-2 p-3 border-round">
          <div class="flex justify-content-between mb-3">
            <div>
              <span class="block text-900 font-bold mb-3">{{
                employee.name
              }}</span>
              <div class="text-500 font-medium text-sm">
                {{ employee.email }}
              </div>
            </div>
            <div
              class="flex align-items-center justify-content-center bg-blue-100 border-round"
              style="width: 2.5rem; height: 2.5rem"
            >
              <span class="text-blue-500 text-xl">{{
                employee.current_score
              }}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="px-4 py-5 md:px-6 lg:px-8">
    <div class="flex justify-content-between">
      <p class="text-xl text-900 font-medium mb-3">Teams</p>
      <div class="flex gap-2">
        <p-button severity="secondary">Create New Team</p-button>
        <p-button severity="info">Add New Employee</p-button>
      </div>
    </div>

    <p-accordion class="w-full">
      <p-accordionTab *ngFor="let team of teams">
        <ng-template pTemplate="header">
          <span class="flex align-items-center gap-2 w-full">
            <span class="font-bold white-space-nowrap"> {{ team.title }} </span>
            <p-badge [value]="team.overall_score" class="ml-auto mr-2" />
          </span>
        </ng-template>
        <p class="m-0">{{ team.description }}</p>
        <i class="pi pi-users mt-3"></i> {{ team.total_employee_count }}

        <p-accordion
          class="w-full"
        >
          <p-accordionTab *ngFor="let employee of team.employees">
            <ng-template pTemplate="header">
              <span class="flex align-items-center gap-2 w-full">
                <span class="font-bold white-space-nowrap">
                  {{ employee.name }}
                </span>
                <p-badge
                  [value]="employee.current_score"
                  class="ml-auto mr-2"
                />
              </span>
            </ng-template>
            <ul class="list-none p-0 m-0 surface-border">
              <li class="flex align-items-center py-3 px-2 flex-wrap">
                <div class="text-500 w-full md:w-2 font-medium">Title</div>
                <div class="text-900 w-full md:w-10 line-height-3">{{employee.title}}
                </div>
              </li>
              <li class="flex align-items-center py-3 px-2 flex-wrap">
                <div class="text-500 w-full md:w-2 font-medium">Email</div>
                <div class="text-900 w-full md:w-10 line-height-3">{{employee.email}}
                </div>
              </li>
              <li class="flex align-items-center py-3 px-2 flex-wrap">
                <div class="text-500 w-full md:w-2 font-medium">Skills</div>
                <div class="text-900 w-full md:w-10">
                  <p-tag styleclass="mr-2" [value]="skill" *ngFor="let skill of employee.skills_being_developed"
                    >
                    </p-tag
                  >
                </div>
              </li>
              <li class="flex align-items-center py-3 px-2 flex-wrap">
                <div class="text-500 w-full md:w-2 font-medium">Lesson Take</div>
                <div class="text-900 w-full md:w-10">
                 {{employee.lessons_taken}}
                </div>
              </li>
            </ul>
          </p-accordionTab>
        </p-accordion>
      </p-accordionTab>
    </p-accordion>
  </div>

  <div class="px-4 py-5 md:px-6 lg:px-8">
    <div class="grid">
      <div class="lg:col-4 col-12 md:col-6">
        <div class="surface-card shadow-2 border-round p-4">
          <div class="flex justify-content-between align-items-center mb-5">
            <span class="text-xl text-900 font-medium"
              >Skills In Development</span
            >
          </div>
          <p-chart
            type="polarArea"
            [data]="skills_in_development"
            [responsive]="true"
            height="345"
          />
        </div>
      </div>
      <div class="lg:col-4 col-12 md:col-6">
        <div class="surface-card shadow-2 border-round p-4">
          <div class="flex justify-content-between align-items-center mb-5">
            <span class="text-xl text-900 font-medium">Top Skills</span>
          </div>
          <p-chart
            type="doughnut"
            [data]="top_skills"
            [responsive]="true"
            height="345"
          />
        </div>
      </div>
      <div class="lg:col-4 col-12 md:col-6">
        <div class="surface-card shadow-2 border-round p-4">
          <div class="flex justify-content-between align-items-center mb-5">
            <span class="text-xl text-900 font-medium">Activity Hours</span>
          </div>
          <p-chart
            type="bar"
            [data]="activity_hours"
            [responsive]="true"
            height="345"
            [options]="options"
          />
        </div>
      </div>
    </div>
  </div>
  <div class="lg:px-8 md:px-6 px-4">
    <div class="col-12">
      <div class="surface-card shadow-2 border-round p-4">
        <div class="flex justify-content-between align-items-center mb-5">
          <span class="text-xl text-900 font-medium">Courses</span>
        </div>
        <ul class="list-none p-0 m-0 gap-2 flex flex-column">
          <li
            class="flex flex-column md:flex-row md:align-items-center md:justify-content-between p-3 border-1 bg-yellow-50 border-yellow-500"
            style="border-radius: 10px"
            *ngFor="let course of in_progress_courses"
          >
            <div>
              <div>
                <span
                  class="inline-flex justify-content-center align-items-center"
                ></span
                ><span class="text-yellow-700 font-bold">{{
                  course.title
                }}</span>
              </div>
              <p class="text-yellow-700 mt-2 mb-0">
                {{ course.description }}
              </p>
              <p class="text-yellow-700 mt-2 mb-0">
                <i class="pi pi-user mr-2"></i> {{ course.assigned_to }}
              </p>
            </div>
            <div
              class="flex flex-column align-items-center justify-content-between md:justify-content-end mt-3 md:mt-0"
            >
              <span
                class="bg-yellow-400 text-yellow-900 font-bold text-sm py-1 px-2"
                style="border-radius: 10px"
                >{{ course.status }}</span
              >
              <div class="text-right ml-3">
                <p class="text-yellow-700 mt-2 mb-0">
                  Due <span class="font-medium">{{ course.due_date }}</span>
                </p>
              </div>
            </div>
          </li>
          <li
            class="flex flex-column md:flex-row md:align-items-center md:justify-content-between p-3 border-1 bg-pink-50 border-pink-500"
            style="border-radius: 10px"
            *ngFor="let course of upcoming_courses"
          >
            <div>
              <div>
                <span
                  class="inline-flex justify-content-center align-items-center"
                ></span
                ><span class="text-pink-700 font-bold">{{ course.title }}</span>
              </div>
              <p class="text-pink-700 mt-2 mb-0">
                {{ course.description }}
              </p>
              <p class="text-pink-700 mt-2 mb-0">
                <i class="pi pi-user mr-2"></i> {{ course.assigned_to }}
              </p>
            </div>
            <div
              class="flex flex-column align-items-center justify-content-between md:justify-content-end mt-3 md:mt-0"
            >
              <span
                class="bg-pink-400 text-pink-900 font-bold text-sm py-1 px-2"
                style="border-radius: 10px"
                >{{ course.status }}</span
              >
              <div class="text-right ml-3">
                <p class="text-pink-700 mt-2 mb-0">
                  Due <span class="font-medium">{{ course.due_date }}</span>
                </p>
              </div>
            </div>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>
